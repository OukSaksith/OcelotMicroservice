@page "/clazz/view/{id:int}"
@using WebUI.Components.Models
@inject NavigationManager NavigationManager
@inject ApiService ApiService

<h3>Class Management - VIEW</h3>

<EditForm Model="newClazz" >
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="mb-3">
        <label>Title</label>
        <input readonly class="form-control" @bind="newClazz.Title" />
    </div>
    <div class="mb-3">
        <label>Description</label>
        <input readonly class="form-control" @bind="newClazz.Description" />
    </div>
    <div class="mb-3">
        <label>Capacity</label>
        <input readonly class="form-control" @bind="newClazz.Capacity" />
    </div>

    <!-- Students as checkboxes -->
    <div class="mb-3">
        <label>Students</label>
        @foreach (var student in newClazz.Students)
        {
            <div class="form-check">
                <input class="form-check-input" type="checkbox"
                       id="student_@student.Id"
                       value="@student.Id"
                       checked="checked"
                    >
                <label class="form-check-label" for="student_@student.Id">
                    #@student.Id - @student.Name
                </label>
            </div>
        }
    </div>

    <button class="btn btn-secondary" @onclick="Cancel">Cancel</button>
</EditForm>

@code {


    [Parameter] public int Id { get; set; }

    private ClazzModel newClazz = new ClazzModel();

    protected override async Task OnInitializedAsync()
    {

        newClazz = await ApiService.GetClazzesAsyncById(Id);

    }

    private void Cancel()
    {
        NavigationManager.NavigateTo("/clazz"); // Cancel and go back
    }
}
